
name: PR Lint

on:
    pull_request:
        # By default, a workflow only runs when a pull_request's activity type is opened, synchronize, or reopened. We
        # explicity override here so that PR titles are re-linted when the PR text content is edited.
        #
        # Possible values: https://help.github.com/en/actions/reference/events-that-trigger-workflows#pull-request-event-pull_request
        types: [opened, edited, reopened, draft, push, pull_request, synchronize, labeled, unlabeled]

jobs:
    prlint:
        runs-on: ubuntu-latest
        steps:
            - name: check pull request title
              uses: morrisoncole/pr-lint-action@v1.2.2
              with:
                  title-regex: "^(EF-)"
                  on-failed-regex-comment: "Pull request title must begin with one of these: SD- MES- PA- INFRA-"
                  repo-token: "${{ secrets.GITHUB_TOKEN }}"
            - name: check pull request labels
              uses: NathanielHill/check-pr-label-action@v4.0.0
              with:
                  valid-labels: "bug, story, task"
                  github-token: "${{ secrets.GITHUB_TOKEN }}"
